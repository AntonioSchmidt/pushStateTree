{"version":3,"file":"pushStateTree.min.js","sources":["src/pushStateTree.js"],"names":["root","wrapProperty","scope","prop","target","Object","defineProperty","get","set","isExternal","url","test","isRelative","slice","PushStateTree","options","ready","hasOwnProperty","rootElement","prototype","hasPushState","USE_PUSH_STATE","val","basePath","apply","this","arguments","history","length","state","uri","hashPos","location","href","indexOf","replace","origin","configurable","addEventListener","POPSTATE","rulesDispatcher","oldURI","oldState","bind","HASHCHANGE","onhashchange","dispatchHashChange","event","HashChangeEvent","dispatchEvent","document","isIE","setInterval","readdOnhashchange","avoidTriggering","removeEventListener","trident","window","navigator","userAgent","protocol","host","Function","oThis","TypeError","aArgs","Array","call","fToBind","fNOP","fBound","concat","Event","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","Element","opera","version","e","proto","createEventObject","constructor","srcElement","addEventListenerFunc","type","handler","__bindedFunctions","fn","__elemetIEid","Math","random","customEventId","documentElement","element","propHandler","propertyName","push","original","binded","attachEvent","bindedFn","HTMLDocument","removeEventListenerFunc","i","splice","detachEvent","obj","name","customEvent","dispatchEventFunc","fireEvent","modernBrowser","builtinSlice","arr","n","forEach","action","that","String","trim","filter","fun","t","len","res","thisArg","LEAVE","UPDATE","ENTER","CHANGE","MATCH","OLD_MATCH","createElement","createRule","rule","match","oldMatch","add","appendChild","remove","queryOrElement","querySelector","parentElement","removeChild","dispatch","recursiveDispatcher","ruleElement","PushStateTreeEvent","useURI","useOldURI","parentGroup","children","childNodes","method","scopeMethod","args","hash","lastIndexOf","pushState","lastTitle","title","replaceState","Error","relativePos"],"mappings":"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"}