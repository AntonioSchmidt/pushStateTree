<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PushStateTree Demo</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico and apple-touch-icon(s) in the root directory -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
    <script>
    var basePath = '/pushStateTree';
    if (location.hostname.indexOf('github') === -1){
      basePath = '';
    }
    
    // If no internet found (programming on travels...)
    // Load resources from offline folder
    if (typeof $ !== 'function' || !$.when){
      
      function loadOffline(src, callback) {
        // Load a file and execute the callback, should be used to
        // load files in the right order and then boot the system
        
        var type = src.substr(-3) === 'css' ? 'link' : 'script';
        var element = document.createElement(type);
        var path = location.origin + basePath + '/demo/offline/';
        element.onload = callback;
        if(type === 'link'){
          element.setAttribute('rel', 'stylesheet');
          element.setAttribute('href', path + src);
        } else {
          element.setAttribute('src', path + src);
        }
        // May not work on old browsers... But it should only be used on development
        document.head.appendChild(element);
      }
      // Load offline jquery and bootstrap
      loadOffline('jquery.1.11.min.js', function(){
        loadOffline('bootstrap.min.css');
        loadOffline('bootstrap.min.js');
        boot();
      });
    } else {
      boot();
    }
    
    function boot(){
      // boot the demo page

      function load(src){
        // Simple script loader based on promises
        
        var defer = $.Deferred();
        $('<script>')
          .appendTo('head')
          .attr('src', location.origin + src)
          .on('load', defer.resolve)
          .on('error', defer.reject);
        return defer.promise;
      }
      // Export load as global
      window.load = load;

      $.when(load(basePath + '/pushStateTree.js'))
        .then(load(basePath + '/demo/main.js'))
        .done(function (){
        //console.log('script loaded');
      });
    }
    </script>
  </head>
  <body>
    <!--[if lt IE 9]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    
    <div class="container">

      <!-- Static navbar -->
      <div class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">PushStateTree</a>
          </div>
          <div class="navbar-collapse collapse">
            <ul id="navbarMain" class="nav navbar-nav"></ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </div>
      <a href="https://github.com/gartz/pushStateTree" class="ribbon bg-green">Fork me on GitHub</a>

    </div>
    
  </body>
</html>
